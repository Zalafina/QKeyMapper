## QKeyMapper正则匹配规则说明

正则表达式（Regular Expression）是一种强大的文本匹配工具，可以帮助你灵活地匹配各种文本模式。在 QKeyMapper 中，你可以使用正则表达式来匹配进程名称、窗口标题和窗口类名。

### 常用符号说明

| 符号 | 含义 | 示例 | 匹配结果 |
|------|------|------|----------|
| `.` | 匹配任意单个字符 | `Game.exe` | Game1.exe, Game2.exe, GameA.exe |
| `*` | 前面的字符出现0次或多次 | `Game.*` | Game, Game1, GameTest, Game_Final |
| `+` | 前面的字符出现1次或多次 | `Game.+` | Game1, GameTest（不匹配Game） |
| `?` | 前面的字符出现0次或1次 | `Games?` | Game, Games |
| `\` | 转义字符，用于匹配特殊字符 | `Game\.exe` | Game.exe（匹配实际的点号） |
| `^` | 匹配字符串开头 | `^Game` | Game开头的字符串 |
| `$` | 匹配字符串结尾 | `\.exe$` | 以.exe结尾的字符串 |
| `\|` | 或运算符 | `Game1\|Game2` | Game1 或 Game2 |
| `[]` | 字符集合，匹配其中任意一个字符 | `Game[123]` | Game1, Game2, Game3 |
| `[^]` | 否定字符集合 | `[^0-9]` | 匹配非数字字符 |
| `()` | 分组，用于组合多个字符 | `(DNF\|DFO)\.exe` | DNF.exe 或 DFO.exe |

**重要提示：** 在 Windows 路径中，反斜杠 `\` 需要写成 `\\`（例如：`C:\\Program Files\\` 要写成 `C:\\\\Program Files\\\\`）

### 进程匹配示例

#### 示例1：匹配多个不同路径下的可执行文件

**场景：** 你有多个游戏安装在不同位置，需要同时匹配它们。

**路径：**
- `D:\Game\Game1.exe`
- `E:\steamapps\common\Game2\Game2.exe`
- `E:\MyGames\Game_3\Game3.exe`

**正则表达式：**
```regex
(D:\\Game\\Game1\.exe|E:\\steamapps\\common\\Game2\\Game2\.exe|E:\\MyGames\\Game_3\\Game3\.exe)
```

**简化写法（推荐）：** 如果只关注可执行文件名
```regex
(Game1|Game2|Game3)\.exe$
```

#### 示例2：匹配某个目录下所有 .exe 文件

**场景：** 匹配 `E:\MyGames\Game_3\` 目录下的所有可执行文件。

**正则表达式：**
```regex
E:\\MyGames\\Game_3\\.*\.exe$
```

**说明：** `.*` 表示匹配任意字符任意次，`\.exe$` 表示以 .exe 结尾。

#### 示例3：匹配多个版本的同一游戏

**场景：** 游戏有多个区域版本，路径结构相似但区域标识不同。

**路径示例：**
- `E:\Game\DNF\DNF_Foreign\DNF-KOREA\KOREA\DNF\DNF.exe`
- `E:\Game\DNF\DNF_CHINA\DNF\DNF.exe`
- `E:\Game\DNF\DNF_Foreign\DFO-GLOBAL\DFO\DFO.exe`
- `E:\Game\DNF\DNF_Foreign\DNF-JAPAN\ARAD\ARAD.exe`

**正则表达式：**
```regex
E:\\Game\\DNF\\.*\\(?:DNF|DFO|ARAD)\.exe$
```

#### 示例4：匹配 Steam 游戏

**场景：** 匹配 Steam 安装的某个游戏，但 Steam 库可能在不同盘符。

**正则表达式：**
```regex
[A-Z]:\\.*\\steamapps\\common\\GameName\\Game\.exe$
```

**说明：** `[A-Z]` 匹配任意盘符（C、D、E等）。

#### 示例5：匹配带版本号的游戏

**场景：** 游戏可执行文件名包含版本号，如 `Game_v1.0.exe`, `Game_v2.5.exe`。

**正则表达式：**
```regex
Game_v[0-9]+\.[0-9]+\.exe$
```

**说明：** `[0-9]+` 匹配一个或多个数字。

#### 示例6：匹配启动器或主程序

**场景：** 游戏有启动器(Launcher)和主程序，都需要匹配。

**正则表达式：**
```regex
(GameLauncher|Game)\.exe$
```

### 窗口标题匹配示例

#### 示例1：匹配包含特定文本的窗口标题

**场景：** 窗口标题包含游戏名称，但后面可能有其他文本（如关卡、地图名等）。

**窗口标题示例：** `我的游戏 - 第一关`, `我的游戏 - 主菜单`, `我的游戏 - 设置`

**正则表达式：**
```regex
^我的游戏
```

**说明：** `^` 表示以"我的游戏"开头。

#### 示例2：匹配多语言版本窗口标题

**场景：** 游戏有中英文版本，窗口标题不同。

**正则表达式：**
```regex
^(My Game|我的游戏)
```

#### 示例3：匹配带版本号的窗口标题

**场景：** 窗口标题包含版本号，如 `Game v1.0`, `Game v2.5`。

**正则表达式：**
```regex
^Game v[0-9]+\.[0-9]+
```

#### 示例4：匹配包含特定关键词的窗口

**场景：** 窗口标题可能有多种格式，但都包含特定关键词。

**窗口标题示例：** `战斗模式 - 游戏`, `游戏 - 冒险模式`, `游戏设置`

**正则表达式：**
```regex
游戏
```

**说明：** 不使用 `^` 或 `$`，可以匹配包含"游戏"的任意位置。

#### 示例5：排除特定窗口标题

**场景：** 匹配游戏窗口，但排除启动器或设置窗口。

**正则表达式（匹配非设置窗口）：**
```regex
^(?!.*设置).*游戏.*
```

**简化方法：** 在 QKeyMapper 中使用"Contains"模式匹配"游戏"，然后手动排除不需要的窗口。

#### 示例6：匹配空白窗口标题

**场景：** 某些游戏的聊天窗口或工具窗口可能没有标题栏文字。

**正则表达式：**
```regex
^$
```

**说明：** `^$` 表示完全空白（从开头到结尾没有任何字符）。

### 窗口类名匹配示例

#### 示例1：匹配 Unity 引擎游戏

**场景：** Unity 引擎制作的游戏，窗口类名通常为 `UnityWndClass`。

**正则表达式：**
```regex
^UnityWndClass$
```

#### 示例2：匹配 Unreal 引擎游戏

**场景：** Unreal 引擎游戏的窗口类名通常包含 `UnrealWindow`。

**正则表达式：**
```regex
UnrealWindow
```

#### 示例3：匹配特定前缀的窗口类

**场景：** 某些游戏或应用的窗口类名有固定前缀。

**窗口类名示例：** `GameWindow_Main`, `GameWindow_Chat`, `GameWindow_Map`

**正则表达式：**
```regex
^GameWindow_
```

#### 示例4：匹配 Qt 应用程序窗口

**场景：** Qt 框架开发的应用，窗口类名通常为 `Qt5QWindowIcon` 或 `Qt6QWindowIcon`。

**正则表达式：**
```regex
^Qt[0-9]QWindowIcon$
```

#### 示例5：匹配 Windows 标准控件

**场景：** 匹配标准 Windows 对话框或控件。

**正则表达式：**
```regex
^#32770$
```

**说明：** `#32770` 是 Windows 对话框的默认类名。

#### 示例6：匹配包含特定文本的类名

**场景：** 窗口类名包含游戏名称或特定标识。

**正则表达式：**
```regex
GameName.*Window
```

**说明：** 匹配包含"GameName"且后面有"Window"的类名。

### 正则匹配实用技巧

1. **从简单开始：** 先尝试使用"Contains"（包含）模式，如果需要更精确的匹配再使用正则表达式。

2. **测试正则表达式：** 可以使用在线正则表达式测试工具（如 regex101.com）来测试你的表达式。

3. **转义特殊字符：** 记住在路径中使用 `\\` 来表示反斜杠，用 `\.` 来表示实际的点号。

4. **循序渐进：** 从匹配单个目标开始，逐步扩展到匹配多个目标。

5. **使用锚点：** `^` 和 `$` 可以让匹配更精确，避免意外匹配。

6. **善用或运算符：** 使用 `|` 可以在一个表达式中匹配多个不同的模式。

### 正则匹配注意事项

- 正则表达式默认区分大小写，在 QKeyMapper 的匹配规则中也是按照区分大小写进行正则匹配。
- 如果正则表达式不工作，检查是否正确转义了特殊字符（特别是反斜杠和点号）。
- 复杂的正则表达式可能影响性能，建议在满足需求的前提下尽量使用简单的表达式。

### regex101.com 在线正则匹配测试网站使用图示
<div align="center"><img src="..\screenshot\regex_online_test.png" width="auto" height="auto"/></div>
